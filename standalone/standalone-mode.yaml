deployment:
  replicaCount: 0
envFrom:
  - secretRef:
      name: redpanda-password
config:
  input:
    label: "generate-names"
    generate:
      interval: 1s
      count: 0
      mapping: |
        # Store the generated names in variables
        let first_name = fake("first_name")
        let last_name = fake("last_name")

        # Build the message
        root.user_id = counter()
        root.name = ($first_name + " " + $last_name)
        root.timestamp = now()
  pipeline:
    processors:
      - label: "processor-uppercase-names"
        mapping: |
          root.name = this.name.uppercase()
  output:
    broker:
      pattern: fan_out
      outputs:
        - redpanda:
            seed_brokers: [ "seed-1e82e69a.cuudhhqrjofpulqb43hg.byoc.prd.cloud.redpanda.com:9092" ]
            tls:
              enabled: true
            sasl:
              - mechanism: SCRAM-SHA-256
                username: rpcn-gitops
                password: ${RP_PASSWORD}
            topic: rpcn-standalone-topic
        - stdout: {}
